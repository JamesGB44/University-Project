<!DOCTYPE html>
<html>
  <head>    
  </head>
  <body>
    <input type="button" id='script' name="scriptbutton" value=" Run Script " onclick="sainteLague()">


    <script>
	
	
		function decreaseDivisor(){
		
		
		
		}
		
		function increaseDivisor(){
		
		
		
		
		}
		
        function sainteLague(){
            targetSeats = 128;
			partyVotes = 7945305;
			
			partySeats = 0;
			divisor = parseInt(Math.round(partyVotes / targetSeats));
			console.log(divisor);
			
			while (partySeats != targetSeats)
			{
				partySeats = 0;
				for (var i = 0; i < listOfResults.length; i++)
				{
					newSeats = parseInt(Math.round(listOfResults[i][1] / divisor));
					if (listOfResults[i][2] > newSeats)
					{
						partySeats = partySeats + listOfResults[i][2];
					}
					else
					{
						partySeats = partySeats + newSeats;
					}
				}
				console.log(partySeats);
			
				if (partySeats > targetSeats)
				{
					//divisor = increaseDivisor();
					divisor = divisor + (divisor *0.01);
				}
				else if (partySeats < targetSeats)
				{
					//divisor = decreaseDivisor();
					divisor = divisor - (divisor *0.01);
				}	
			
			}
			console.log(divisor);
			
        }
		
		
		
		function sortFunctionA(a, b) {
			if (a[2] === b[2]) {
				return 0;
			}
			else {
				return (a[2] > b[2]) ? -1 : 1;
			}
		}	
		function sortFunctionB(a, b) {
			if (a[3] === b[3]) {
				return 0;
			}
			else {
				return (a[3] > b[3]) ? -1 : 1;
			}
		}
		
		var listOfResults  = [["BW",1315970, 3],
				["BE",270843, 0],
				["BB",253939, 6],
				["BM",53239, 0],
				["HM",169986, 0],
				["HE",659489, 7],
				["LS",1036264, 12],
				["MV",196125, 5],
				["NRW",2051497, 31],
				["RP",541278, 13],
				["SL",121004, 3],
				["SA",424947, 1],
				["ST",240900, 8],
				["SH",372213, 2],
				["TH",237611, 4]];
    </script>
  </body>
</html>